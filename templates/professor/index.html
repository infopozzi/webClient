{% extends "template.html" %}

{% block conteudo %}

<h2> Cadastro de Professor/Listar </h2>

<hr/>

<div class="row">
    <a class="btn btn-primary" href="cadastrar">Cadastrar</a>
</div>

<table class="table table-striped table-bordered">
    <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col">Nome</th>
        <th scope="col">Idade</th>
        <th scope="col">Matéria</th>
        <th scope="col">Observação</th>
        <th scope="col">Ação</th>
      </tr>
    </thead>
    <tbody>

        {% for professor in professores %}
        <tr>
            <th scope="row">{{professor.id}}</th>
            <td>{{professor.nome}}</td>
            <td>{{professor.idade}}</td>
            <td>{{professor.materia}}</td>
            <td>{{professor.observacao}}</td>
            
            <td> <a class="btn btn-warning" href="obter/{{professor.id}}">Alterar</a>                
                <form action="excluir" method="POST">
                    <input type="hidden" name="id" id="id" value="{{professor.id}}" />
                    <input type="submit" class="btn btn-danger" value="Excluir" onclick="return confirm('Tem certeza de deseja excluir?')" /> 
                </form>
            </td>
          </tr>

        {% endfor %}

    </tbody>
  </table>

<script>



function buscar()
{
    debugger
   

    /*
    fetch('http://127.0.0.1:8080/bucar/1')
  .then(response => response.json())
  .then(data => {alert(data.usuario.nome)})
  .catch(error => console.error('Erro na requisição:', error)); */

}

function salvar()
{

    fetch('http://127.0.0.1:8080/salvar', { method: 'POST', headers : { 'Content-Type': 'application/json' }, body:  JSON.stringify({ nome: "mateus"}) })
  .then(response => response.json())
  .then(data => {alert(data.message)})
  .catch(error => console.error('Erro na requisição:', error));


/*
    const data = {
        nome: "mateus"
    };

    fetch('http://127.0.0.1:8080/salvar', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'  // Define o tipo de conteúdo como JSON
        },
        body: JSON.stringify(data)  // Converte o objeto JavaScript para JSON
    })
    .then(response => {
        if (!response.ok) {
            throw new Error('Erro na resposta da rede');
        }
        return response.json();  // Converte a resposta para JSON
    })
    .then(data => {
        alert(data.message);  // Exibe a mensagem de sucesso
    })
    .catch(error => {
        console.error('Erro na requisição:', error);
    });
    */

}

</script>

{% endblock %}