{% extends "template.html" %}

{% block conteudo %}

<form action="{{url_for('turma.salvar')}}" method="POST">
    <h2> Cadastro de Turma/Cadastro </h2>
    
    <hr/>
    
    <div class="row">
        <input type="hidden" name="id" id="id" value="{{turma.id}}"  />

        <div class="col-md-6 form-group">
            <label class="control-label">Nome</label>
            <input class="form-control" type="text" name="nome" id="nome" value="{{turma.nome}}" required />
        </div>
    
         <div class="col-md-6 form-group">
            <label class="control-label">Descrição</label>
            <input class="form-control" type="text" name="descricao" id="descricao" value="{{turma.descricao}}" required />
        </div>

        <div class="col-md-6 form-group">
            <label class="control-label" name="ddlProfessor" id="ddlProfessor">Professor</label>
            <select class="form-control" name="professor_id" id="professor_id" required>
                <option value="0">--Selecione--</option>
                {% for professor in professores %}
                    <option value="{{professor.id}}" selected = {{turma.professor_id == professor.id}}>{{professor.nome}}</option>
                {% endfor %}
            </select>
        </div>

        <div class="col-md-6 form-group">
            <label class="control-label">Ativo</label><br/>
            <input class="form-check-input" type="checkbox" name="ativo" id="ativo" checked="{{turma.ativo}}" />
        </div>

    </div>   

    <hr/>

    <div class="row">
        <input type="submit" class="btn btn-success" id="btnset" value="Salvar" /> 
    </div>
        
</form>

<script>

function buscar()
{
    debugger
    /*
    fetch('http://127.0.0.1:8080/bucar/1')
  .then(response => response.json())
  .then(data => {alert(data.usuario.nome)})
  .catch(error => console.error('Erro na requisição:', error)); */

}

function salvar()
{
    /*
    fetch('http://127.0.0.1:8080/salvar', { method: 'POST', headers : { 'Content-Type': 'application/json' }, body:  JSON.stringify({ nome: "mateus"}) })
  .then(response => response.json())
  .then(data => {alert(data.message)})
  .catch(error => console.error('Erro na requisição:', error));

    const data = {
        nome: "mateus"
    };

    fetch('http://127.0.0.1:8080/salvar', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'  // Define o tipo de conteúdo como JSON
        },
        body: JSON.stringify(data)  // Converte o objeto JavaScript para JSON
    })
    .then(response => {
        if (!response.ok) {
            throw new Error('Erro na resposta da rede');
        }
        return response.json();  // Converte a resposta para JSON
    })
    .then(data => {
        alert(data.message);  // Exibe a mensagem de sucesso
    })
    .catch(error => {
        console.error('Erro na requisição:', error);
    });
    */
}

</script>

{% endblock %}